"use strict";var chellPortlet=angular.module("chell-portlet",["templates-chell-portlet","ui.bootstrap","ui.sortable","ui.utils"]),chellPortlet=angular.module("chell-portlet");chellPortlet.directive("chellPortlet",function(){return{restrict:"E",transclude:!0,scope:{title:"@title"},controller:"PortletController",templateUrl:"templates/portlet.tpl.html",link:function(a,b){a.$watch("fullscreen",function(a){$(b).find(".box-content").height(a?$(window).height():"auto")}),a.$watch("borderless",function(a){a?$(b).find(".box").addClass("box-borderless"):$(b).find(".box").removeClass("box-borderless")}),a.$watch("pinned",function(a){a?$(b).find(".box").addClass("portlet-pinned"):$(b).find(".box").removeClass("portlet-pinned")})}}}),chellPortlet.directive("chellPortletContainer",function(){return{restrict:"A",link:function(a,b){$(".column",b).sortable({connectWith:".column",iframeFix:!1,items:"div.box",opacity:.8,helper:"original",revert:!0,cancel:".portlet-pinned",forceHelperSize:!0,placeholder:"box-placeholder round-all",forcePlaceholderSize:!0,tolerance:"pointer",handle:".box-header"})}}}),chellPortlet.directive("chellIframe",function(){return{restrict:"E",controller:"IframeController",templateUrl:"templates/iframe.tpl.html"}}),chellPortlet.directive("chellPortletTemplate",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{name:"@name"},templateUrl:"templates/portlet-template.tpl.html",link:function(a,b){b.draggable({revert:"invalid",cursor:"pointer",connectWith:".dropme",helper:"clone",opacity:.5,zIndex:10})}}}),chellPortlet.directive("uiDroppable",function(){return{restrict:"A",require:"?ngModel",link:function(a,b){b.droppable({accept:".portlet-template",activeClass:"highlight",drop:function(a,c){$(b[0]).append(c.draggable[0].children[1].firstElementChild)}})}}});var chellPortlet=angular.module("chell-portlet");chellPortlet.controller("PortletController",["$scope","$modal","$element","$attrs",function(a,b,c,d){a.minimized=a.$eval(d.minimized),a.fullscreen=a.$eval(d.fullscreen),a.pinned=a.$eval(d.pinned),a.borderless=a.$eval(d.borderless),a.toggleMinimized=function(){a.minimized=!a.minimized},a.toggleFullscreen=function(){a.fullscreen=!a.fullscreen},a.close=function(){a.modalInstance=b.open({templateUrl:"templates/portlet-confirm-dialog.tpl.html",backdrop:"static",keyboard:"false",controller:"PortletModalConfirmController",resolve:{message:function(){return"Remove the Portlet?"}}}),a.modalInstance.result.then(function(a){a&&c.remove()})},a.config=function(){a.modalInstance=b.open({templateUrl:"templates/portlet-config-dialog.tpl.html",backdrop:"static",keyboard:"false",controller:"PortletModalConfigController",resolve:{config:function(){return{borderless:a.borderless,pinned:a.pinned}}}}),a.modalInstance.result.then(function(b){a.borderless=b.borderless,a.pinned=b.pinned})}}]),chellPortlet.controller("PortletModalConfigController",["$scope","$modalInstance","config",function(a,b,c){a.config=c,a.ok=function(){b.close(a.config)},a.cancel=function(){b.dismiss("cancel")}}]),chellPortlet.controller("PortletModalConfirmController",["$scope","$modalInstance","message",function(a,b,c){a.message=c,a.ok=function(){a.confirmed=!0,b.close(a.confirmed)},a.cancel=function(){a.confirmed=!1,b.dismiss(a.confirmed)}}]),chellPortlet.controller("SortableController",["$scope",function(a){a.origPortlets=[{title:"Test1",content:"Content1"},{title:"Test2",content:"Content2"},{title:"Test3",content:"Content3"}],a.portlets=a.origPortlets.slice(),a.sortableOptions={connectWith:".portlet-container",iframeFix:!1,opacity:.8,helper:"original",revert:!0,cancel:".portlet-pinned",forceHelperSize:!0,placeholder:"box-placeholder round-all",forcePlaceholderSize:!0,tolerance:"pointer"},a.reset=function(){a.portlets=a.origPortlets.slice()}}]),chellPortlet.controller("IframeController",["$scope","$modal","$attrs","$sce",function(a,b,c,d){a.config={},a.config.src=c.src,a.config.width=c.width,a.config.height=c.height,a.edit=function(){a.modalInstance=b.open({templateUrl:"templates/iframe-config-dialog.tpl.html",backdrop:"false",keyboard:"true",controller:"IframeConfigModalController",windowClass:"modal-wide",resolve:{modalConfig:function(){return angular.copy(a.config)}}}),a.modalInstance.result.then(function(b){a.config=b})},a.trustSrc=function(a){return d.trustAsResourceUrl(a)}}]),chellPortlet.controller("IframeConfigModalController",["$scope","$modalInstance","modalConfig",function(a,b,c){a.modalConfig=c,a.cancel=function(){b.dismiss("cancel")},a.ok=function(){b.close(a.modalConfig)}}]),angular.module("templates-chell-portlet",["templates/iframe-config-dialog.tpl.html","templates/iframe.tpl.html","templates/portlet-config-dialog.tpl.html","templates/portlet-confirm-dialog.tpl.html","templates/portlet-template.tpl.html","templates/portlet.tpl.html"]),angular.module("templates/iframe-config-dialog.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/iframe-config-dialog.tpl.html",'<div class="modal-header">\n    <button class="close" ng-click="cancel()">×</button>\n    <h3>Select Content</h3>\n</div>\n<div class="modal-body">\n    <fieldset>\n        <div class="form-group">\n            <label for="inputSrc">Src</label>\n            <input class="form-control" id="inputSrc" ng-model="modalConfig.src">\n        </div>\n        <div class="form-group">\n            <label for="inputWidth">Width</label>\n            <input class="form-control" id="inputWidth" ng-model="modalConfig.width">\n        </div>\n        <div class="form-group">\n            <label for="inputHeight">Height</label>\n            <input class="form-control" id="inputHeight" ng-model="modalConfig.height">\n        </div>\n    </fieldset>\n</div>\n<div class="modal-footer">\n    <button class="btn" ng-click="cancel()">Cancel</button>\n    <button class="btn btn-primary" ng-click="ok()">Save</button>\n</div>\n\n')}]),angular.module("templates/iframe.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/iframe.tpl.html",'<div class="iframe">\n    <a visibility-role-id="101" class="btn btn-xs" id="iframe-config-button" ng-hide="editor" ng-click="edit()" style="float: right;"><i class="glyphicon glyphicon-cog"></i></a>\n    <iframe ng-src="{{trustSrc(config.src)}}" width="{{config.width}}" height="{{config.height}}" scrolling="auto" border="0" frameborder="0"></iframe>\n</div>\n\n\n\n\n')}]),angular.module("templates/portlet-config-dialog.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/portlet-config-dialog.tpl.html",'<!-- Dialog for the config button on the portlets-->\n<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="cancel()">×</button>\n        <h3>Adjust widget</h3>\n    </div>\n    <div class="modal-body">\n        <tabset>\n            <tab heading="Portlet Config">\n                <div class="checkbox">\n                    <label>\n                        <input type="checkbox" ng-model="config.borderless"> Borderless\n                    </label>\n                </div>\n                <div class="checkbox">\n                    <label>\n                        <input type="checkbox" ng-model="config.pinned"> Pinned\n                    </label>\n                </div>\n            </tab>\n        </tabset>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="ok()">Save Changes</button>\n        <button class="btn" ng-click="cancel()">Cancel</button>\n    </div>\n</div>')}]),angular.module("templates/portlet-confirm-dialog.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/portlet-confirm-dialog.tpl.html",'<!-- Dialog for the config button on the portlets-->\n<div class="modal-content">\n    <div class="modal-header">\n        <button class="close" ng-click="cancel()">×</button>\n        <h3>Are you sure?</h3>\n    </div>\n    <div class="modal-body">\n        {{message}}\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="ok()">Ok</button>\n        <button class="btn" ng-click="cancel()">Cancel</button>\n    </div>\n</div>')}]),angular.module("templates/portlet-template.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/portlet-template.tpl.html",'<div class="portlet-template">\n    <div class="btn btn-default">{{name}}</div>\n    <div style="display: none" ng-transclude></div>\n</div>')}]),angular.module("templates/portlet.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/portlet.tpl.html",'<div class="box" ng-class="{\'portlet-fullscreen\': fullscreen}" moveable-role-id="101">\n\n    <h4 class="box-header" ng-class="{\'round-all\': minimized, \'round-top\': !minimized}">{{title}}\n        <a class="box-btn btn-xs" ng-click="close()"><i class="glyphicon glyphicon-remove"></i></a>\n        <a class="box-btn btn-xs" ng-click="toggleFullscreen()"><i class="glyphicon" ng-class="{\'glyphicon-resize-full\': !fullscreen, \'glyphicon-resize-small\': fullscreen}"></i></a>\n        <a class="box-btn btn-xs" ng-click="toggleMinimized()"><i class="glyphicon" ng-class="{\'glyphicon-minus\': !minimized, \'glyphicon-plus\': minimized}"></i></a>\n        <a class="box-btn btn-xs" ng-click="config()"><i class="glyphicon glyphicon-cog"></i></a>\n    </h4>\n\n    <div class="box-container-toggle" ng-class="{\'box-container-closed\': minimized}">\n        <div class="box-content">\n            <div ng-transclude></div>\n        </div>\n    </div>\n</div>')}]);
//# sourceMappingURL=chell-portlet.min.js.map